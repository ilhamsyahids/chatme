<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Chat IO</title>
    <meta property="og:site_name" content="Chat to Ilhamsyahids">
    <meta property="og:title" content="Chat to Ilhamsyahids">
    <meta property="og:url" content="http://chat.ilhamsyahids.me/">
    <meta name="description" content="Chat directly to Ilhamsyahids.">
    <meta name="og:description" content="Chat directly to Ilhamsyahids.">
    <meta name="twitter:title" content="Chat to Ilhamsyahids">
    <meta name="twitter:description" content="Chat directly to Ilhamsyahids.">
    <link rel="canonical" href="http://chat.ilhamsyahids.me/">

    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <div class="container clearfix">
        <div class="chat">
            <div class="controls">
                <% if (isMe) { %>
                <a href="/logout" class="logout-btn">Logout</a>
                <a href="/dashboard" class="rooms-btn">Back</a>
                <% } else { %>
                <a href="/" class="rooms-btn">Back</a>
                <% }; %>
            </div>
            <div class="chat-header clearfix">
                <div class="chat-about">
                    <div class="chat-room"><%= room.title %></div>
                </div>
            </div> <!-- end chat-header -->

            <div class="chat-history">
                <ul>
                </ul>
            </div> <!-- end chat-history -->

            <div class="chat-message clearfix">
                <textarea name="message" placeholder="Type your message" rows="3"></textarea>
                <button type="submit">Send</button>
            </div> <!-- end chat-message -->
        </div> <!-- end chat -->

    </div> <!-- end container -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/main.js"></script>
    <script>
        $(function () {
            app.chat('<%= room.id %>', '<%= room.title %>')
            const data = <%- chats %>
            data.forEach((c, id) => id === data.length ? app.utils.addMessage(c) : app.utils.addMessage(c, true))
        });
    </script>
</body>

</html>